---
phase: 15-admin-ui
plan: 03
type: execute
wave: 2
depends_on: ["15-01", "15-02"]
files_modified:
  - apps/admin/src/App.tsx
  - apps/admin/src/pages/Dashboard.tsx
  - apps/admin/src/pages/Signals.tsx
  - apps/admin/src/pages/Logs.tsx
  - apps/admin/src/components/ui/table.tsx
  - apps/admin/src/components/ui/card.tsx
  - apps/admin/src/components/ui/select.tsx
  - apps/admin/src/components/portfolio/PortfolioTable.tsx
  - apps/admin/src/components/portfolio/columns.tsx
  - apps/admin/src/components/signals/SignalsTable.tsx
  - apps/admin/src/components/logs/LogViewer.tsx
autonomous: false

must_haves:
  truths:
    - "User can view table of portfolio symbols with current price and MACD-V values"
    - "User can view list of triggered trade signals with timestamp, symbol, and signal type"
    - "User can view filtered log entries (errors, warnings)"
  artifacts:
    - path: "apps/admin/src/pages/Dashboard.tsx"
      provides: "Portfolio page with MACD-V analysis table"
      min_lines: 30
    - path: "apps/admin/src/pages/Signals.tsx"
      provides: "Trade signals page with alert history"
      min_lines: 30
    - path: "apps/admin/src/pages/Logs.tsx"
      provides: "Log viewer page with level filtering"
      min_lines: 30
    - path: "apps/admin/src/components/portfolio/PortfolioTable.tsx"
      provides: "TanStack Table for portfolio data"
      exports: ["PortfolioTable"]
  key_links:
    - from: "apps/admin/src/pages/Dashboard.tsx"
      to: "trpc.indicator.getPortfolioAnalysis"
      via: "useQuery with queryOptions"
      pattern: "getPortfolioAnalysis"
    - from: "apps/admin/src/pages/Signals.tsx"
      to: "trpc.alert.recent"
      via: "useQuery with queryOptions"
      pattern: "alert\\.recent"
    - from: "apps/admin/src/pages/Logs.tsx"
      to: "trpc.logs.getRecent"
      via: "useQuery with queryOptions"
      pattern: "logs\\.getRecent"
---

<objective>
Build the Portfolio, Signals, and Logs pages with real data from tRPC endpoints.

Purpose: Complete UI-01 (Portfolio viewer), UI-02 (Log viewer), and UI-03 (Trade signals viewer). Users can view their portfolio analysis, triggered alerts, and application logs.

Output: Three functional pages displaying real-time data from the Livermore API.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/15-admin-ui/15-RESEARCH.md

# tRPC client setup from 15-01
@apps/admin/src/lib/trpc.ts

# API endpoints to consume
@apps/api/src/routers/indicator.router.ts
@apps/api/src/routers/alert.router.ts
@apps/api/src/routers/logs.router.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create UI components (table, card, select)</name>
  <files>
    apps/admin/src/components/ui/table.tsx
    apps/admin/src/components/ui/card.tsx
    apps/admin/src/components/ui/select.tsx
  </files>
  <action>
Create minimal UI components for the data views. These are simplified shadcn-style components.

1. Create `apps/admin/src/components/ui/table.tsx`:
```typescript
import * as React from 'react';
import { cn } from '@/lib/utils';

const Table = React.forwardRef<
  HTMLTableElement,
  React.HTMLAttributes<HTMLTableElement>
>(({ className, ...props }, ref) => (
  <div className="relative w-full overflow-auto">
    <table
      ref={ref}
      className={cn('w-full caption-bottom text-sm', className)}
      {...props}
    />
  </div>
));
Table.displayName = 'Table';

const TableHeader = React.forwardRef<
  HTMLTableSectionElement,
  React.HTMLAttributes<HTMLTableSectionElement>
>(({ className, ...props }, ref) => (
  <thead ref={ref} className={cn('[&_tr]:border-b', className)} {...props} />
));
TableHeader.displayName = 'TableHeader';

const TableBody = React.forwardRef<
  HTMLTableSectionElement,
  React.HTMLAttributes<HTMLTableSectionElement>
>(({ className, ...props }, ref) => (
  <tbody
    ref={ref}
    className={cn('[&_tr:last-child]:border-0', className)}
    {...props}
  />
));
TableBody.displayName = 'TableBody';

const TableRow = React.forwardRef<
  HTMLTableRowElement,
  React.HTMLAttributes<HTMLTableRowElement>
>(({ className, ...props }, ref) => (
  <tr
    ref={ref}
    className={cn(
      'border-b transition-colors hover:bg-gray-50 data-[state=selected]:bg-gray-100',
      className
    )}
    {...props}
  />
));
TableRow.displayName = 'TableRow';

const TableHead = React.forwardRef<
  HTMLTableCellElement,
  React.ThHTMLAttributes<HTMLTableCellElement>
>(({ className, ...props }, ref) => (
  <th
    ref={ref}
    className={cn(
      'h-10 px-2 text-left align-middle font-medium text-gray-500 [&:has([role=checkbox])]:pr-0',
      className
    )}
    {...props}
  />
));
TableHead.displayName = 'TableHead';

const TableCell = React.forwardRef<
  HTMLTableCellElement,
  React.TdHTMLAttributes<HTMLTableCellElement>
>(({ className, ...props }, ref) => (
  <td
    ref={ref}
    className={cn('p-2 align-middle [&:has([role=checkbox])]:pr-0', className)}
    {...props}
  />
));
TableCell.displayName = 'TableCell';

export { Table, TableHeader, TableBody, TableRow, TableHead, TableCell };
```

2. Create `apps/admin/src/components/ui/card.tsx`:
```typescript
import * as React from 'react';
import { cn } from '@/lib/utils';

const Card = React.forwardRef<
  HTMLDivElement,
  React.HTMLAttributes<HTMLDivElement>
>(({ className, ...props }, ref) => (
  <div
    ref={ref}
    className={cn('rounded-lg border bg-white shadow-sm', className)}
    {...props}
  />
));
Card.displayName = 'Card';

const CardHeader = React.forwardRef<
  HTMLDivElement,
  React.HTMLAttributes<HTMLDivElement>
>(({ className, ...props }, ref) => (
  <div
    ref={ref}
    className={cn('flex flex-col space-y-1.5 p-6', className)}
    {...props}
  />
));
CardHeader.displayName = 'CardHeader';

const CardTitle = React.forwardRef<
  HTMLParagraphElement,
  React.HTMLAttributes<HTMLHeadingElement>
>(({ className, ...props }, ref) => (
  <h3
    ref={ref}
    className={cn('font-semibold leading-none tracking-tight', className)}
    {...props}
  />
));
CardTitle.displayName = 'CardTitle';

const CardContent = React.forwardRef<
  HTMLDivElement,
  React.HTMLAttributes<HTMLDivElement>
>(({ className, ...props }, ref) => (
  <div ref={ref} className={cn('p-6 pt-0', className)} {...props} />
));
CardContent.displayName = 'CardContent';

export { Card, CardHeader, CardTitle, CardContent };
```

3. Create `apps/admin/src/components/ui/select.tsx`:
```typescript
import * as React from 'react';
import { cn } from '@/lib/utils';

interface SelectProps extends React.SelectHTMLAttributes<HTMLSelectElement> {
  options: { value: string; label: string }[];
}

const Select = React.forwardRef<HTMLSelectElement, SelectProps>(
  ({ className, options, ...props }, ref) => (
    <select
      ref={ref}
      className={cn(
        'h-9 w-full rounded-md border border-gray-200 bg-white px-3 py-1 text-sm shadow-sm transition-colors',
        'focus:outline-none focus:ring-1 focus:ring-gray-400',
        'disabled:cursor-not-allowed disabled:opacity-50',
        className
      )}
      {...props}
    >
      {options.map((opt) => (
        <option key={opt.value} value={opt.value}>
          {opt.label}
        </option>
      ))}
    </select>
  )
);
Select.displayName = 'Select';

export { Select };
```
  </action>
  <verify>
    Run `pnpm --filter @livermore/admin type-check` - should pass.
  </verify>
  <done>UI components created: Table, Card, Select.</done>
</task>

<task type="auto">
  <name>Task 2: Create Portfolio page with PortfolioTable</name>
  <files>
    apps/admin/src/pages/Dashboard.tsx
    apps/admin/src/components/portfolio/PortfolioTable.tsx
    apps/admin/src/components/portfolio/columns.tsx
  </files>
  <action>
1. Create `apps/admin/src/components/portfolio/columns.tsx` - TanStack Table column definitions:
```typescript
import { createColumnHelper } from '@tanstack/react-table';

interface PortfolioSymbol {
  symbol: string;
  price: number | null;
  values: Record<string, number | null>;
  signal: string;
  stage: string;
  liquidity: string;
}

const columnHelper = createColumnHelper<PortfolioSymbol>();

/**
 * Format price with appropriate precision.
 */
function formatPrice(price: number | null): string {
  if (price === null) return '-';
  if (price < 0.01) return price.toFixed(6);
  if (price < 1) return price.toFixed(4);
  if (price < 100) return price.toFixed(2);
  return price.toLocaleString(undefined, { maximumFractionDigits: 2 });
}

/**
 * Format MACD-V value with color coding.
 */
function formatMacdV(value: number | null): { text: string; color: string } {
  if (value === null) return { text: '-', color: 'text-gray-400' };
  const text = value.toFixed(1);
  if (value > 50) return { text, color: 'text-green-600 font-medium' };
  if (value > 0) return { text, color: 'text-green-500' };
  if (value > -50) return { text, color: 'text-red-500' };
  return { text, color: 'text-red-600 font-medium' };
}

/**
 * Get signal badge styling.
 */
function getSignalStyle(signal: string): string {
  switch (signal) {
    case 'STRONG BUY':
      return 'bg-green-100 text-green-800';
    case 'Bullish':
      return 'bg-green-50 text-green-700';
    case 'STRONG SELL':
      return 'bg-red-100 text-red-800';
    case 'Bearish':
      return 'bg-red-50 text-red-700';
    case 'Reversal Up?':
      return 'bg-yellow-100 text-yellow-800';
    case 'Reversal Down?':
      return 'bg-orange-100 text-orange-800';
    default:
      return 'bg-gray-100 text-gray-700';
  }
}

export const columns = [
  columnHelper.accessor('symbol', {
    header: 'Symbol',
    cell: (info) => (
      <span className="font-medium">{info.getValue()}</span>
    ),
  }),
  columnHelper.accessor('price', {
    header: 'Price',
    cell: (info) => (
      <span className="font-mono">${formatPrice(info.getValue())}</span>
    ),
  }),
  columnHelper.accessor((row) => row.values['1h'], {
    id: '1h',
    header: '1h',
    cell: (info) => {
      const { text, color } = formatMacdV(info.getValue() ?? null);
      return <span className={`font-mono ${color}`}>{text}</span>;
    },
  }),
  columnHelper.accessor((row) => row.values['4h'], {
    id: '4h',
    header: '4h',
    cell: (info) => {
      const { text, color } = formatMacdV(info.getValue() ?? null);
      return <span className={`font-mono ${color}`}>{text}</span>;
    },
  }),
  columnHelper.accessor((row) => row.values['1d'], {
    id: '1d',
    header: '1d',
    cell: (info) => {
      const { text, color } = formatMacdV(info.getValue() ?? null);
      return <span className={`font-mono ${color}`}>{text}</span>;
    },
  }),
  columnHelper.accessor('signal', {
    header: 'Signal',
    cell: (info) => (
      <span
        className={`inline-flex rounded-full px-2 py-1 text-xs font-medium ${getSignalStyle(info.getValue())}`}
      >
        {info.getValue()}
      </span>
    ),
  }),
  columnHelper.accessor('stage', {
    header: 'Stage',
    cell: (info) => (
      <span className="capitalize">{info.getValue()}</span>
    ),
  }),
  columnHelper.accessor('liquidity', {
    header: 'Liquidity',
    cell: (info) => {
      const liq = info.getValue();
      const color =
        liq === 'high'
          ? 'text-green-600'
          : liq === 'medium'
            ? 'text-yellow-600'
            : 'text-red-600';
      return <span className={`capitalize ${color}`}>{liq}</span>;
    },
  }),
];

export type { PortfolioSymbol };
```

2. Create `apps/admin/src/components/portfolio/PortfolioTable.tsx`:
```typescript
import {
  flexRender,
  getCoreRowModel,
  getSortedRowModel,
  useReactTable,
  type SortingState,
} from '@tanstack/react-table';
import { useState } from 'react';
import {
  Table,
  TableBody,
  TableCell,
  TableHead,
  TableHeader,
  TableRow,
} from '@/components/ui/table';
import { columns, type PortfolioSymbol } from './columns';

interface PortfolioTableProps {
  data: PortfolioSymbol[];
}

export function PortfolioTable({ data }: PortfolioTableProps) {
  const [sorting, setSorting] = useState<SortingState>([]);

  const table = useReactTable({
    data,
    columns,
    state: { sorting },
    onSortingChange: setSorting,
    getCoreRowModel: getCoreRowModel(),
    getSortedRowModel: getSortedRowModel(),
  });

  return (
    <Table>
      <TableHeader>
        {table.getHeaderGroups().map((headerGroup) => (
          <TableRow key={headerGroup.id}>
            {headerGroup.headers.map((header) => (
              <TableHead
                key={header.id}
                className="cursor-pointer select-none"
                onClick={header.column.getToggleSortingHandler()}
              >
                {flexRender(
                  header.column.columnDef.header,
                  header.getContext()
                )}
                {header.column.getIsSorted() === 'asc' && ' ↑'}
                {header.column.getIsSorted() === 'desc' && ' ↓'}
              </TableHead>
            ))}
          </TableRow>
        ))}
      </TableHeader>
      <TableBody>
        {table.getRowModel().rows.length === 0 ? (
          <TableRow>
            <TableCell colSpan={columns.length} className="text-center text-gray-500">
              No data available
            </TableCell>
          </TableRow>
        ) : (
          table.getRowModel().rows.map((row) => (
            <TableRow key={row.id}>
              {row.getVisibleCells().map((cell) => (
                <TableCell key={cell.id}>
                  {flexRender(cell.column.columnDef.cell, cell.getContext())}
                </TableCell>
              ))}
            </TableRow>
          ))
        )}
      </TableBody>
    </Table>
  );
}
```

3. Create `apps/admin/src/pages/Dashboard.tsx`:
```typescript
import { useQuery } from '@tanstack/react-query';
import { trpc } from '@/lib/trpc';
import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';
import { PortfolioTable } from '@/components/portfolio/PortfolioTable';
import type { PortfolioSymbol } from '@/components/portfolio/columns';

/**
 * Portfolio symbols to monitor.
 * These are the symbols with positions or watchlist items.
 */
const PORTFOLIO_SYMBOLS = [
  'BTC-USD',
  'ETH-USD',
  'SOL-USD',
  'XRP-USD',
  'DOGE-USD',
  'ADA-USD',
  'AVAX-USD',
  'LINK-USD',
  'DOT-USD',
  'MATIC-USD',
  'SHIB-USD',
  'UNI-USD',
  'LTC-USD',
  'ATOM-USD',
  'XLM-USD',
];

export function Dashboard() {
  const { data, isLoading, error, refetch, isFetching } = useQuery(
    trpc.indicator.getPortfolioAnalysis.queryOptions({
      symbols: PORTFOLIO_SYMBOLS,
    })
  );

  if (isLoading) {
    return (
      <Card>
        <CardHeader>
          <CardTitle>Portfolio Analysis</CardTitle>
        </CardHeader>
        <CardContent>
          <div className="flex items-center justify-center py-8">
            <div className="h-8 w-8 animate-spin rounded-full border-4 border-gray-200 border-t-gray-600" />
          </div>
        </CardContent>
      </Card>
    );
  }

  if (error) {
    return (
      <Card>
        <CardHeader>
          <CardTitle>Portfolio Analysis</CardTitle>
        </CardHeader>
        <CardContent>
          <div className="rounded-md bg-red-50 p-4 text-red-700">
            Error: {error.message}
          </div>
        </CardContent>
      </Card>
    );
  }

  // Transform API response to table format
  const symbols: PortfolioSymbol[] = (data?.symbols ?? []).map((s) => ({
    symbol: s.symbol,
    price: s.price,
    values: s.values,
    signal: s.signal,
    stage: s.stage,
    liquidity: s.liquidity,
  }));

  return (
    <Card>
      <CardHeader className="flex flex-row items-center justify-between">
        <CardTitle>Portfolio Analysis</CardTitle>
        <button
          onClick={() => refetch()}
          disabled={isFetching}
          className="rounded-md bg-gray-100 px-3 py-1 text-sm font-medium text-gray-700 hover:bg-gray-200 disabled:opacity-50"
        >
          {isFetching ? 'Refreshing...' : 'Refresh'}
        </button>
      </CardHeader>
      <CardContent>
        <PortfolioTable data={symbols} />
        {data?.timestamp && (
          <p className="mt-4 text-xs text-gray-500">
            Last updated: {new Date(data.timestamp).toLocaleString()}
          </p>
        )}
      </CardContent>
    </Card>
  );
}
```
  </action>
  <verify>
    Run `pnpm --filter @livermore/admin type-check` - should pass.
  </verify>
  <done>Dashboard page with PortfolioTable displaying MACD-V analysis.</done>
</task>

<task type="auto">
  <name>Task 3: Create Signals and Logs pages, update App.tsx</name>
  <files>
    apps/admin/src/pages/Signals.tsx
    apps/admin/src/pages/Logs.tsx
    apps/admin/src/components/signals/SignalsTable.tsx
    apps/admin/src/components/logs/LogViewer.tsx
    apps/admin/src/App.tsx
  </files>
  <action>
1. Create `apps/admin/src/components/signals/SignalsTable.tsx`:
```typescript
import {
  Table,
  TableBody,
  TableCell,
  TableHead,
  TableHeader,
  TableRow,
} from '@/components/ui/table';

interface Signal {
  id: number;
  symbol: string;
  alertType: string;
  timeframe: string;
  price: number;
  triggerValue: number | null;
  triggeredAt: string;
}

interface SignalsTableProps {
  data: Signal[];
}

function formatAlertType(type: string): { label: string; color: string } {
  switch (type) {
    case 'oversold':
      return { label: 'Oversold', color: 'bg-green-100 text-green-800' };
    case 'overbought':
      return { label: 'Overbought', color: 'bg-red-100 text-red-800' };
    case 'crossover_bullish':
      return { label: 'Bullish Crossover', color: 'bg-green-50 text-green-700' };
    case 'crossover_bearish':
      return { label: 'Bearish Crossover', color: 'bg-red-50 text-red-700' };
    case 'divergence_bullish':
      return { label: 'Bullish Divergence', color: 'bg-blue-100 text-blue-800' };
    case 'divergence_bearish':
      return { label: 'Bearish Divergence', color: 'bg-orange-100 text-orange-800' };
    default:
      return { label: type, color: 'bg-gray-100 text-gray-700' };
  }
}

export function SignalsTable({ data }: SignalsTableProps) {
  return (
    <Table>
      <TableHeader>
        <TableRow>
          <TableHead>Time</TableHead>
          <TableHead>Symbol</TableHead>
          <TableHead>Signal Type</TableHead>
          <TableHead>Timeframe</TableHead>
          <TableHead>Price</TableHead>
          <TableHead>Value</TableHead>
        </TableRow>
      </TableHeader>
      <TableBody>
        {data.length === 0 ? (
          <TableRow>
            <TableCell colSpan={6} className="text-center text-gray-500">
              No signals triggered
            </TableCell>
          </TableRow>
        ) : (
          data.map((signal) => {
            const { label, color } = formatAlertType(signal.alertType);
            return (
              <TableRow key={signal.id}>
                <TableCell className="font-mono text-sm">
                  {new Date(signal.triggeredAt).toLocaleString()}
                </TableCell>
                <TableCell className="font-medium">{signal.symbol}</TableCell>
                <TableCell>
                  <span
                    className={`inline-flex rounded-full px-2 py-1 text-xs font-medium ${color}`}
                  >
                    {label}
                  </span>
                </TableCell>
                <TableCell>{signal.timeframe}</TableCell>
                <TableCell className="font-mono">
                  ${signal.price.toLocaleString(undefined, { maximumFractionDigits: 2 })}
                </TableCell>
                <TableCell className="font-mono">
                  {signal.triggerValue?.toFixed(1) ?? '-'}
                </TableCell>
              </TableRow>
            );
          })
        )}
      </TableBody>
    </Table>
  );
}

export type { Signal };
```

2. Create `apps/admin/src/pages/Signals.tsx`:
```typescript
import { useQuery } from '@tanstack/react-query';
import { trpc } from '@/lib/trpc';
import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';
import { SignalsTable, type Signal } from '@/components/signals/SignalsTable';

export function Signals() {
  const { data, isLoading, error, refetch, isFetching } = useQuery(
    trpc.alert.recent.queryOptions({ limit: 50 })
  );

  if (isLoading) {
    return (
      <Card>
        <CardHeader>
          <CardTitle>Trade Signals</CardTitle>
        </CardHeader>
        <CardContent>
          <div className="flex items-center justify-center py-8">
            <div className="h-8 w-8 animate-spin rounded-full border-4 border-gray-200 border-t-gray-600" />
          </div>
        </CardContent>
      </Card>
    );
  }

  if (error) {
    return (
      <Card>
        <CardHeader>
          <CardTitle>Trade Signals</CardTitle>
        </CardHeader>
        <CardContent>
          <div className="rounded-md bg-red-50 p-4 text-red-700">
            Error: {error.message}
          </div>
        </CardContent>
      </Card>
    );
  }

  const signals: Signal[] = (data?.data ?? []).map((s) => ({
    id: s.id,
    symbol: s.symbol,
    alertType: s.alertType,
    timeframe: s.timeframe,
    price: s.price,
    triggerValue: s.triggerValue,
    triggeredAt: s.triggeredAt,
  }));

  return (
    <Card>
      <CardHeader className="flex flex-row items-center justify-between">
        <CardTitle>Trade Signals</CardTitle>
        <button
          onClick={() => refetch()}
          disabled={isFetching}
          className="rounded-md bg-gray-100 px-3 py-1 text-sm font-medium text-gray-700 hover:bg-gray-200 disabled:opacity-50"
        >
          {isFetching ? 'Refreshing...' : 'Refresh'}
        </button>
      </CardHeader>
      <CardContent>
        <SignalsTable data={signals} />
      </CardContent>
    </Card>
  );
}
```

3. Create `apps/admin/src/components/logs/LogViewer.tsx`:
```typescript
import { cn } from '@/lib/utils';

interface LogEntry {
  timestamp: string;
  level: 'DEBUG' | 'INFO' | 'WARN' | 'ERROR';
  name: string;
  service: string;
  msg: string;
  event?: string;
  symbol?: string;
}

interface LogViewerProps {
  entries: LogEntry[];
}

function getLevelStyle(level: string): string {
  switch (level) {
    case 'ERROR':
      return 'bg-red-100 text-red-800';
    case 'WARN':
      return 'bg-yellow-100 text-yellow-800';
    case 'INFO':
      return 'bg-blue-100 text-blue-800';
    case 'DEBUG':
      return 'bg-gray-100 text-gray-800';
    default:
      return 'bg-gray-100 text-gray-600';
  }
}

export function LogViewer({ entries }: LogViewerProps) {
  if (entries.length === 0) {
    return (
      <div className="py-8 text-center text-gray-500">No log entries found</div>
    );
  }

  return (
    <div className="space-y-2">
      {entries.map((entry, idx) => (
        <div
          key={`${entry.timestamp}-${idx}`}
          className={cn(
            'rounded-md border p-3',
            entry.level === 'ERROR' && 'border-red-200 bg-red-50',
            entry.level === 'WARN' && 'border-yellow-200 bg-yellow-50'
          )}
        >
          <div className="flex items-start gap-3">
            <span
              className={`inline-flex rounded px-2 py-0.5 text-xs font-medium ${getLevelStyle(entry.level)}`}
            >
              {entry.level}
            </span>
            <div className="flex-1 min-w-0">
              <div className="flex items-center gap-2 text-sm text-gray-500">
                <span className="font-mono">
                  {new Date(entry.timestamp).toLocaleTimeString()}
                </span>
                <span className="text-gray-300">|</span>
                <span>{entry.service}</span>
                {entry.symbol && (
                  <>
                    <span className="text-gray-300">|</span>
                    <span className="font-medium">{entry.symbol}</span>
                  </>
                )}
              </div>
              <p className="mt-1 text-sm text-gray-900">{entry.msg}</p>
              {entry.event && (
                <p className="mt-1 text-xs text-gray-500">Event: {entry.event}</p>
              )}
            </div>
          </div>
        </div>
      ))}
    </div>
  );
}

export type { LogEntry };
```

4. Create `apps/admin/src/pages/Logs.tsx`:
```typescript
import { useState } from 'react';
import { useQuery } from '@tanstack/react-query';
import { trpc } from '@/lib/trpc';
import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';
import { Select } from '@/components/ui/select';
import { LogViewer, type LogEntry } from '@/components/logs/LogViewer';

type LogLevel = 'ERROR' | 'WARN' | 'INFO' | 'DEBUG';

const LEVEL_OPTIONS = [
  { value: 'WARN', label: 'Errors & Warnings' },
  { value: 'ERROR', label: 'Errors Only' },
  { value: 'INFO', label: 'Info & Above' },
  { value: 'DEBUG', label: 'All (Debug)' },
];

export function Logs() {
  const [level, setLevel] = useState<LogLevel>('WARN');

  const { data, isLoading, error, refetch, isFetching } = useQuery(
    trpc.logs.getRecent.queryOptions({ level, limit: 100 })
  );

  if (isLoading) {
    return (
      <Card>
        <CardHeader>
          <CardTitle>Logs</CardTitle>
        </CardHeader>
        <CardContent>
          <div className="flex items-center justify-center py-8">
            <div className="h-8 w-8 animate-spin rounded-full border-4 border-gray-200 border-t-gray-600" />
          </div>
        </CardContent>
      </Card>
    );
  }

  if (error) {
    return (
      <Card>
        <CardHeader>
          <CardTitle>Logs</CardTitle>
        </CardHeader>
        <CardContent>
          <div className="rounded-md bg-red-50 p-4 text-red-700">
            Error: {error.message}
          </div>
        </CardContent>
      </Card>
    );
  }

  const entries: LogEntry[] = (data?.data ?? []) as LogEntry[];

  return (
    <Card>
      <CardHeader className="flex flex-row items-center justify-between">
        <div>
          <CardTitle>Logs</CardTitle>
          <p className="mt-1 text-sm text-gray-500">
            {data?.date} - {data?.count} of {data?.total} entries
          </p>
        </div>
        <div className="flex items-center gap-2">
          <Select
            options={LEVEL_OPTIONS}
            value={level}
            onChange={(e) => setLevel(e.target.value as LogLevel)}
            className="w-40"
          />
          <button
            onClick={() => refetch()}
            disabled={isFetching}
            className="rounded-md bg-gray-100 px-3 py-1 text-sm font-medium text-gray-700 hover:bg-gray-200 disabled:opacity-50"
          >
            {isFetching ? 'Refreshing...' : 'Refresh'}
          </button>
        </div>
      </CardHeader>
      <CardContent>
        <LogViewer entries={entries} />
      </CardContent>
    </Card>
  );
}
```

5. Update `apps/admin/src/App.tsx` to use the new pages:
```typescript
import { useState, useEffect } from 'react';
import { SignedIn, SignedOut, SignIn, UserButton } from '@clerk/clerk-react';
import { Dashboard } from './pages/Dashboard';
import { Signals } from './pages/Signals';
import { Logs } from './pages/Logs';

function App() {
  const [hash, setHash] = useState(window.location.hash || '#/');

  useEffect(() => {
    const handleHashChange = () => setHash(window.location.hash || '#/');
    window.addEventListener('hashchange', handleHashChange);
    return () => window.removeEventListener('hashchange', handleHashChange);
  }, []);

  return (
    <>
      <SignedOut>
        <div className="flex min-h-screen items-center justify-center bg-gray-100">
          <SignIn routing="hash" />
        </div>
      </SignedOut>
      <SignedIn>
        <div className="min-h-screen bg-gray-100">
          <header className="bg-white shadow">
            <div className="mx-auto flex max-w-7xl items-center justify-between px-4 py-4">
              <h1 className="text-xl font-bold text-gray-900">Livermore Admin</h1>
              <nav className="flex items-center gap-6">
                <a
                  href="#/"
                  className={`${hash === '#/' || hash === '' ? 'text-gray-900 font-medium' : 'text-gray-600'} hover:text-gray-900`}
                >
                  Portfolio
                </a>
                <a
                  href="#/signals"
                  className={`${hash === '#/signals' ? 'text-gray-900 font-medium' : 'text-gray-600'} hover:text-gray-900`}
                >
                  Signals
                </a>
                <a
                  href="#/logs"
                  className={`${hash === '#/logs' ? 'text-gray-900 font-medium' : 'text-gray-600'} hover:text-gray-900`}
                >
                  Logs
                </a>
                <UserButton
                  afterSignOutUrl="/"
                  appearance={{
                    elements: {
                      avatarBox: 'h-8 w-8',
                    },
                  }}
                />
              </nav>
            </div>
          </header>
          <main className="mx-auto max-w-7xl px-4 py-8">
            <HashRouter hash={hash} />
          </main>
        </div>
      </SignedIn>
    </>
  );
}

function HashRouter({ hash }: { hash: string }) {
  switch (hash) {
    case '#/signals':
      return <Signals />;
    case '#/logs':
      return <Logs />;
    default:
      return <Dashboard />;
  }
}

export default App;
```
  </action>
  <verify>
    Run `pnpm --filter @livermore/admin type-check` - should pass.
  </verify>
  <done>Signals and Logs pages created, App.tsx updated with proper hash routing.</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
    Complete admin UI with three pages:
    1. Portfolio - MACD-V analysis table with symbols, prices, values, signals
    2. Signals - Trade alerts with timestamp, symbol, signal type
    3. Logs - Application logs with level filtering
  </what-built>
  <how-to-verify>
    Prerequisites:
    - API server running: `pnpm --filter @livermore/api dev`
    - Admin app running: `pnpm --filter @livermore/admin dev`
    - Valid VITE_CLERK_PUBLISHABLE_KEY in apps/admin/.env

    Test steps:
    1. Open http://localhost:5173
    2. Sign in with Google OAuth
    3. Verify Portfolio page shows:
       - Table with symbols (BTC-USD, ETH-USD, etc.)
       - Current prices
       - MACD-V values for 1h, 4h, 1d
       - Color-coded signals (Bullish/Bearish/etc.)
       - Sortable columns
    4. Click "Signals" nav link - verify trade signals table shows
    5. Click "Logs" nav link - verify:
       - Log entries appear with timestamps
       - Level filter dropdown works (Errors & Warnings, Errors Only, etc.)
       - Error/Warning entries are highlighted
    6. Verify Refresh buttons work on each page
    7. Sign out - verify redirect to sign-in page
  </how-to-verify>
  <resume-signal>Type "approved" to complete Phase 15, or describe any issues found.</resume-signal>
</task>

</tasks>

<verification>
1. `pnpm --filter @livermore/admin type-check` passes
2. `pnpm --filter @livermore/admin dev` starts without errors
3. Portfolio page displays symbols with prices and MACD-V values
4. Signals page displays triggered alerts with timestamps
5. Logs page displays log entries with level filtering
6. All pages fetch real data from API endpoints
7. Authentication required for all data (via tRPC protectedProcedure for logs)
</verification>

<success_criteria>
- UI-01 (Portfolio viewer) complete: shows symbols, prices, MACD-V values, signals
- UI-02 (Log viewer) complete: shows filtered log entries with level selection
- UI-03 (Trade signals) complete: shows alerts with timestamp, symbol, signal type
- UI-04 (Clerk sign-in) complete: Google OAuth working, UserButton shows identity
- All success criteria from Phase 15 met
</success_criteria>

<output>
After completion, create `.planning/phases/15-admin-ui/15-03-SUMMARY.md`
</output>
